{"version":3,"sources":["node_modules/point-in-polygon/index.js","drawSpaceShip.ts","effects.ts","index.ts"],"names":[],"mappings":"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","file":"Fully fledged page.689574b8.js","sourceRoot":"..","sourcesContent":["module.exports = function (point, vs) {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    \n    var x = point[0], y = point[1];\n    \n    var inside = false;\n    for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n        var xi = vs[i][0], yi = vs[i][1];\n        var xj = vs[j][0], yj = vs[j][1];\n        \n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n    \n    return inside;\n};\n","\r\nexport function drawSpaceShip(\r\n    context: CanvasRenderingContext2D, \r\n    deltaTime: number,\r\n    shipPosX: number, \r\n    shipPosY: number,\r\n    rotation: number,\r\n    ){\r\n    const size = 60;\r\n    let posX = shipPosX;\r\n    let posY = shipPosY;\r\n\r\n    context.save();\r\n    context.translate(posX, posY)\r\n    context.rotate(rotation);\r\n \r\n    context.beginPath();\r\n    context.moveTo(size/2,0);\r\n    context.lineTo(-size/2,-size/4);\r\n    context.lineTo(-size/5,0);\r\n    context.lineTo(-size/2,size/4);\r\n    context.closePath();\r\n    context.strokeStyle = \"white\";\r\n    context.lineWidth = 1;\r\n    context.stroke();\r\n    context.restore();\r\n  }\r\n","export const effect: Array<Smoke> = [];\r\n\r\ninterface Smoke {\r\n    x: number;\r\n    y: number;\r\n    velocityX: number;\r\n    velocityY: number;\r\n    opacity: number;\r\n    speed: number;\r\n    img: HTMLCanvasElement;\r\n}\r\n\r\nconst redSmoke = createSmokeParticle(\"red\", 80, 80);\r\nconst orangeSmoke = createSmokeParticle(\"darkorange\", 80, 80);\r\nconst whiteExplosion = createSmokeParticle(\"white\", 80, 80);\r\n\r\n//const whiteSmoke = createSmokeParticle(\"whiteSmoke\", 256, 60);\r\n\r\nexport function createSmokeParticle(\r\n    color: string,\r\n    canvasSize: number,\r\n    particleSize: number\r\n) {\r\n    // izveido attēlu vienai dūmu daļiņai, jo .drawImage() ir daudz ātrāka funkcija\r\n    // nekā beginPath/arc/shadow/fill.\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = canvasSize;\r\n    canvas.height = canvasSize;\r\n\r\n    const context = canvas.getContext(\"2d\");\r\n    context.beginPath();\r\n    context.arc(-10000, 0, particleSize / 5, 0, Math.PI * 2);\r\n    context.fillStyle = \"gray\";\r\n    context.shadowBlur = particleSize;\r\n    context.shadowOffsetX = 10000 + canvas.width / 2;\r\n    context.shadowOffsetY = canvas.height / 2;\r\n    context.shadowColor = color;\r\n    context.fill();\r\n\r\n    return canvas;\r\n}\r\n\r\n\r\nexport function createExplosion(x: number, y: number) {\r\n    for (let i = 0; i < 50; i++) {\r\n        const speed = 10;\r\n        effect.push({\r\n            x: x,\r\n            y: y,\r\n            velocityX: Math.random() * 0.03 * speed - 0.015 * speed, // -0.015 .. 0.015\r\n            velocityY: Math.random() * 0.03 * speed - 0.015 * speed,\r\n            opacity: 1,\r\n            speed: speed,\r\n            img: redSmoke\r\n        });\r\n    }\r\n\r\n    for (let i = 0; i < 50; i++) {\r\n        const speed = 8;\r\n        effect.push({\r\n            x: x,\r\n            y: y,\r\n            velocityX: Math.random() * 0.03 * speed - 0.015 * speed, // -0.015 .. 0.015\r\n            velocityY: Math.random() * 0.03 * speed - 0.015 * speed,\r\n            opacity: 1,\r\n            speed: speed,\r\n            img: orangeSmoke\r\n        });\r\n    }\r\n}\r\n\r\nexport function createAsteroidExplosion(x: number, y: number) {\r\n    for (let i = 0; i < 15; i++) {\r\n        const speed = 15;\r\n        effect.push({\r\n            x: x,\r\n            y: y,\r\n            velocityX: Math.random() * 0.03 * speed - 0.015 * speed, // -0.015 .. 0.015\r\n            velocityY: Math.random() * 0.03 * speed - 0.015 * speed,\r\n            opacity: 1,\r\n            speed: speed,\r\n            img: whiteExplosion\r\n        });\r\n    }\r\n}\r\n//awinbabwe\r\n\r\n\r\nexport function drawEffects(context: CanvasRenderingContext2D, deltaTime: number) {\r\n    for (let i = 0; i < effect.length; i++) {\r\n        const e = effect[i];\r\n\r\n        e.x += e.velocityX * deltaTime;\r\n        e.y += e.velocityY * deltaTime;\r\n\r\n        e.opacity -= deltaTime * 0.0001 * e.speed;\r\n\r\n        if (e.opacity > 0) {\r\n            context.globalAlpha = e.opacity;\r\n            context.drawImage(e.img, e.x - e.img.width / 2, e.y - e.img.width / 2);\r\n        } else {\r\n            effect.splice(i, 1);\r\n            i = i - 1;\r\n        }\r\n    }\r\n    context.globalAlpha = 1;\r\n}\r\n\r\n","import isPointInside from \"point-in-polygon\";\r\n\r\nimport { drawSpaceShip } from \"./drawSpaceShip\";\r\nimport {\r\n    createExplosion,\r\n    drawEffects,\r\n    createAsteroidExplosion,\r\n    effect,\r\n    createSmokeParticle\r\n} from \"./effects\";\r\n\r\n\r\n//        isPointInside([129, 100], polygon.map(function(relativeCoords) { return [ relativeCoords[0] + asX, relativeCoords[1] + asY ] })),\r\n\r\n//        );\r\n\r\n\r\nconst canvas = document.createElement(\"canvas\");\r\ndocument.body.appendChild(canvas);\r\ncanvas.style.background = \"black\";\r\ncanvas.style.outline = \"2px solid green\";\r\ncanvas.style.margin = \"12px 50px\";\r\ncanvas.width = 1000;\r\ncanvas.height = 580;\r\ncanvas.style.position = \"absolute\";\r\n\r\nlet onfocus = true;\r\n\r\nwindow.onblur = function () {\r\n    onfocus = false;\r\n}\r\nwindow.onfocus = function () {\r\n    onfocus = true;\r\n}\r\n\r\nconst shipThurst = createSmokeParticle(\"lime\", 20, 20);\r\nconst context = canvas.getContext(\"2d\");\r\nlet keysPressed: string[] = [];\r\nlet previousTime = 0;\r\nlet shipRotation = 0;\r\nlet velocity = 0;\r\nlet velocityX = 0;\r\nlet velocityY = 0;\r\nlet shipPosX = 500;\r\nlet shipPosY = 300;\r\nlet shipDead = 0;\r\nlet aSize = 40;\r\nlet score = 0;\r\nlet highscore = 0;\r\n\r\n\r\ninterface iBullet {\r\n    bulletPosX: number;\r\n    bulletPosY: number;\r\n    bulletAngle: number;\r\n    bulletVelocity: number;\r\n    size: number;\r\n}\r\n\r\ninterface iAsteroid {\r\n    asteroidPosX: number;\r\n    asteroidPosY: number;\r\n    aVelocityX: number,\r\n    aVelocityY: number,\r\n    asteroidSize: number;\r\n\r\n    points: Array<[number, number]>;\r\n}\r\n\r\nconst bullets: Array<iBullet> = [];\r\nconst asteroids: Array<iAsteroid> = [];\r\n\r\ndocument.addEventListener(\"mousedown\", function() {\r\n\r\n       const bgmusic = document.getElementById(\"backgroundMusic\") as HTMLAudioElement;\r\n\r\n       bgmusic.volume = 0.02;\r\n       bgmusic.play();\r\n});\r\n\r\ndocument.onkeydown = function (event) {\r\n    if (keysPressed.indexOf(event.key) === -1) {\r\n        keysPressed.push(event.key);\r\n    }\r\n};\r\ndocument.onkeyup = function (event) {\r\n    const idx = keysPressed.indexOf(event.key);\r\n\r\n    if (idx > -1) {\r\n        keysPressed.splice(idx, 1);\r\n    }\r\n};\r\n\r\n\r\ncanvas.onmousedown = function (event) {\r\n    if (shipDead === 0) {\r\n        bullets.push({\r\n            bulletPosX: shipPosX + Math.cos(shipRotation) * 30,\r\n            bulletPosY: shipPosY + Math.sin(shipRotation) * 30,\r\n            bulletAngle: shipRotation,\r\n            bulletVelocity: velocity,\r\n            size: 3,\r\n        });\r\n    }\r\n};\r\n\r\n\r\ndocument.getElementById(\"play-btn\").addEventListener(\"click\", function () {\r\n    document.getElementById(\"splash\").style.display = \"none\";\r\n    window.setInterval(function () {\r\n        if (onfocus === false) {\r\n            return;\r\n        }\r\n        asteroids.push({\r\n            asteroidPosX: -20,\r\n            asteroidPosY: Math.random() * 500,\r\n            aVelocityX: 2 * Math.random() * 9 + 10,\r\n            aVelocityY: (Math.random() * 5) - 2.5,\r\n            asteroidSize: aSize,\r\n            points:\r\n                [[0, -aSize],\r\n                [aSize / 3 + Math.round((Math.random() * 10) - 5), -aSize / 1.2 + Math.round((Math.random() * 10) - 5)],\r\n                [aSize / 2 + Math.round((Math.random() * 10) - 5), -aSize / 2 + Math.round((Math.random() * 10) - 5)],\r\n                [aSize / 1.2 + Math.round((Math.random() * 10) - 5), -aSize / 3 + Math.round((Math.random() * 10) - 5)],\r\n                [aSize, 0],\r\n                [aSize / 1.2 + Math.round((Math.random() * 10) - 5), aSize / 3 + Math.round((Math.random() * 10) - 5)],\r\n                [aSize / 2 + Math.round((Math.random() * 10) - 5), aSize / 2 + Math.round((Math.random() * 10) - 5)],\r\n                [aSize / 3 + Math.round((Math.random() * 10) - 5), aSize / 1.2 + Math.round((Math.random() * 10) - 5)],\r\n                [0, aSize],\r\n                [-aSize / 3 + Math.round((Math.random() * 10) - 5), aSize / 1.2 + Math.round((Math.random() * 10) - 5)],//wtf\r\n                [-aSize / 2 + Math.round((Math.random() * 10) - 5), aSize / 2 + Math.round((Math.random() * 10) - 5)],\r\n                [-aSize / 1.2 + Math.round((Math.random() * 10) - 5), aSize / 3 + Math.round((Math.random() * 10) - 5)],\r\n                [-aSize, 0],\r\n                [-aSize / 1.2 + Math.round((Math.random() * 10) - 5), -aSize / 3 + Math.round((Math.random() * 10) - 5)],\r\n                [-aSize / 2 + Math.round((Math.random() * 10) - 5), -aSize / 2 + Math.round((Math.random() * 10) - 5)],\r\n                [-aSize / 3 + Math.round((Math.random() * 10) - 5), -aSize / 1.2 + Math.round((Math.random() * 10) - 5)]],\r\n        });\r\n        if (shipDead === 0) {\r\n            score += 5;\r\n        }\r\n    }, 1000);\r\n\r\n\r\n\r\n    window.requestAnimationFrame(renderLoop);\r\n});\r\n\r\nfunction renderLoop(time: number) {\r\n    window.requestAnimationFrame(renderLoop);\r\n\r\n    if (previousTime === 0) {\r\n        previousTime = time;\r\n    }\r\n\r\n    if(shipDead != 0){\r\n        document.getElementById(\"gameover\").style.display = \"block\";\r\n        document.getElementById(\"gameover\").style.zIndex = \"20\";\r\n        }\r\n\r\n    const shipWasDead = shipDead !== 0;\r\n    let deltaTime = time - previousTime;\r\n    previousTime = time;\r\n\r\n    if (onfocus === false) {\r\n        return;\r\n    }\r\n    if(shipDead === 0){\r\n    if (keysPressed.includes(\"a\")) {\r\n        shipRotation -= 0.07 * deltaTime / 16;\r\n    }\r\n    if (keysPressed.includes(\"d\")) {\r\n        shipRotation += 0.07 * deltaTime / 16;\r\n    }\r\n    if (keysPressed.includes(\"w\")) {\r\n        velocityX += 3 * Math.cos(shipRotation) * deltaTime / 16;\r\n        velocityY += 3 * Math.sin(shipRotation) * deltaTime / 16;\r\n        createShipThrust(shipPosX + Math.cos(shipRotation) * -20,shipPosY + Math.sin(shipRotation) * -20);\r\n    }\r\n    // if (keysPressed.includes(\"s\")) {\r\n    //        velocityX -= 2 * Math.cos(shipRotation) * deltaTime / 16;\r\n    //        velocityY -= 2 * Math.sin(shipRotation) * deltaTime / 16;\r\n    // }\r\n    }\r\n\r\n\r\n\r\n\r\n    velocity = Math.sqrt(velocityX ** 2 + velocityY ** 2);\r\n\r\n    velocityX = Math.min(250, Math.max(-250, velocityX));\r\n    velocityY = Math.min(250, Math.max(-250, velocityY));\r\n\r\n    if (shipPosX >= 1031) {\r\n        shipPosX = -25;\r\n    }\r\n    if (shipPosX <= -26) {\r\n        shipPosX = 1030;\r\n    }\r\n    if (shipPosY >= 611) {\r\n        shipPosY = -27;\r\n    }\r\n    if (shipPosY <= -28) {\r\n        shipPosY = 610;\r\n    }\r\n\r\n    if (shipDead === 0) {\r\n        shipPosX += (velocityX / 50) * deltaTime / 16;\r\n        shipPosY += (velocityY / 50) * deltaTime / 16;\r\n    }\r\n\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n    if (shipDead === 0) {\r\n        for (let i = 0; i < asteroids.length; i++) {\r\n            let collisionPointX1 = shipPosX + Math.cos(shipRotation) * 30;\r\n            let collisionPointY1 = shipPosY + Math.sin(shipRotation) * 30;\r\n            let collisionPointX2 = shipPosX + Math.cos(shipRotation + Math.PI + 0.5) * 33;\r\n            let collisionPointY2 = shipPosY + Math.sin(shipRotation + Math.PI + 0.5) * 33;\r\n            let collisionPointX3 = shipPosX + Math.cos(shipRotation + Math.PI - 0.5) * 33;\r\n            let collisionPointY3 = shipPosY + Math.sin(shipRotation + Math.PI - 0.5) * 33;\r\n            let collisionPointX4 = (collisionPointX1 + collisionPointX3) / 2;\r\n            let collisionPointY4 = (collisionPointY1 + collisionPointY3) / 2;\r\n            let collisionPointX5 = (collisionPointX1 + collisionPointX2) / 2;\r\n            let collisionPointY5 = (collisionPointY1 + collisionPointY2) / 2;\r\n            \r\n            let a = asteroids[i];\r\n\r\n            if (isPointInside([collisionPointX1 - a.asteroidPosX, collisionPointY1 - a.asteroidPosY], a.points) === true) {\r\n                shipDead = time;\r\n                createAsteroidExplosion(asteroids[i].asteroidPosX,asteroids[i].asteroidPosY)\r\n                asteroids.splice(i, 1);\r\n                i = i - 1;\r\n            }\r\n            if (isPointInside([collisionPointX2 - a.asteroidPosX, collisionPointY2 - a.asteroidPosY], a.points) === true) {\r\n                shipDead = time;\r\n                createAsteroidExplosion(asteroids[i].asteroidPosX,asteroids[i].asteroidPosY)\r\n                asteroids.splice(i, 1);\r\n                i = i - 1;\r\n            }\r\n            if (isPointInside([collisionPointX3 - a.asteroidPosX, collisionPointY3 - a.asteroidPosY], a.points) === true) {\r\n                shipDead = time;\r\n                createAsteroidExplosion(asteroids[i].asteroidPosX,asteroids[i].asteroidPosY)\r\n                asteroids.splice(i, 1);\r\n                i = i - 1;\r\n            }\r\n            if (isPointInside([collisionPointX4 - a.asteroidPosX, collisionPointY4 - a.asteroidPosY], a.points) === true) {\r\n                shipDead = time;\r\n                createAsteroidExplosion(asteroids[i].asteroidPosX,asteroids[i].asteroidPosY)\r\n                asteroids.splice(i, 1);\r\n                i = i - 1;\r\n            }\r\n            if (isPointInside([collisionPointX5 - a.asteroidPosX, collisionPointY5 - a.asteroidPosY], a.points) === true) {\r\n                shipDead = time;\r\n                createAsteroidExplosion(asteroids[i].asteroidPosX,asteroids[i].asteroidPosY)\r\n                asteroids.splice(i, 1);\r\n                i = i - 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    drawBullets(time, deltaTime);\r\n\r\n    for (let i = 0; i < asteroids.length; i++) {\r\n        if (asteroids[i].asteroidPosX <= canvas.width + 30) {\r\n            drawAsteroid(asteroids[i], time, deltaTime);\r\n        } else {\r\n            asteroids.splice(i, 1);\r\n            i = i - 1;\r\n        }\r\n    }\r\n\r\n    for (let a = 0; a < asteroids.length; a++) {\r\n        for (let b = 0; b < bullets.length; b++) {\r\n            \r\n            if (isPointInside([bullets[b].bulletPosX - asteroids[a].asteroidPosX, bullets[b].bulletPosY - asteroids[a].asteroidPosY], asteroids[a].points) === true) {\r\n                createAsteroidExplosion(asteroids[a].asteroidPosX, asteroids[a].asteroidPosY);\r\n                asteroids.splice(a, 1);\r\n                bullets.splice(b, 1);\r\n                a = a - 1;\r\n                score += 10;\r\n                \r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if (shipDead === 0) {\r\n        drawSpaceShip(context, deltaTime, shipPosX, shipPosY, shipRotation);\r\n    } else if (!shipWasDead) {\r\n        createExplosion(shipPosX, shipPosY);\r\n    }\r\n\r\n    drawEffects(context, deltaTime);\r\n\r\n    context.fillStyle = \"white\";\r\n    context.font = \"16px Arial\";\r\n    context.fillText(\"Score: \" + score.toString(), 20, 25);\r\n\r\n}\r\n\r\nfunction drawBullets(time: number, deltaTime: number) {\r\n    for (let i = 0; i < bullets.length; i++) {\r\n        let b = bullets[i];\r\n        drawSingleBullet(b, time, deltaTime);\r\n\r\n        if (b.bulletPosX >= canvas.width + 20\r\n            || b.bulletPosX <= - 20\r\n            || b.bulletPosY >= canvas.height + 20\r\n            || b.bulletPosY <= - 20\r\n        ) {\r\n            bullets.splice(i, 1);\r\n            i = i - 1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction drawSingleBullet(bullet: iBullet, time: number, deltaTime: number, ) {\r\n\r\n    const size = bullet.size;\r\n\r\n    const bulletPosX = bullet.bulletPosX;\r\n    const bulletPosY = bullet.bulletPosY;\r\n    const bulletAngle = bullet.bulletAngle;\r\n\r\n    bullet.bulletPosX += Math.cos(bulletAngle) * deltaTime / 16 * 10; //velocityX/50;\r\n    bullet.bulletPosY += Math.sin(bulletAngle) * deltaTime / 16 * 10; //velocityY/50;\r\n\r\n    context.beginPath();\r\n    context.moveTo(bulletPosX - 1, bulletPosY - 1);\r\n    context.lineTo(bulletPosX + 1, bulletPosY - 1);\r\n    context.lineTo(bulletPosX + 1, bulletPosY + 1);\r\n    context.lineTo(bulletPosX - 1, bulletPosY + 1);\r\n    context.closePath();\r\n    context.strokeStyle = \"red\";\r\n    context.lineWidth = 2;\r\n    context.stroke();\r\n}\r\n\r\nfunction drawAsteroid(asteroid: iAsteroid, time: number, deltaTime: number, ) {\r\n    const size = asteroid.asteroidSize;\r\n\r\n    const asteroidPosX = asteroid.asteroidPosX;\r\n    const asteroidPosY = asteroid.asteroidPosY;\r\n\r\n    const aVelocityX = asteroid.aVelocityX * deltaTime / 10;\r\n    const aVelocityY = asteroid.aVelocityY * deltaTime / 10;\r\n\r\n    asteroid.asteroidPosX += aVelocityX / 6;\r\n    asteroid.asteroidPosY += aVelocityY / 2;\r\n\r\n    const points = asteroid.points;\r\n\r\n    context.beginPath();\r\n    context.moveTo(asteroidPosX + points[0][0], asteroidPosY + points[0][1]);\r\n\r\n    for (let i = 0; i < points.length; i++) {\r\n        context.lineTo(asteroidPosX + points[i][0], asteroidPosY + points[i][1]);\r\n    }\r\n\r\n    context.closePath();\r\n\r\n    context.strokeStyle = \"white\";\r\n    context.lineWidth = 2;\r\n    context.stroke();\r\n\r\n    context.fillStyle = \"#111\";\r\n    context.fill();\r\n\r\n}\r\nfunction createShipThrust(x: number, y: number) {\r\n    for (let i = 0; i < 10; i++) {\r\n        const speed = 1;\r\n        effect.push({\r\n            x: x,\r\n            y: y,\r\n            velocityX: Math.cos(shipRotation + Math.random() * 0.4 - 0.2) * -1/3 * speed, // -0.015 .. 0.015\r\n            velocityY: Math.sin(shipRotation + Math.random() * 0.4 - 0.2) * -1/3 * speed,\r\n            opacity: 0.5,\r\n            speed: speed,\r\n            img: shipThurst\r\n        });\r\n    }\r\n}"]}